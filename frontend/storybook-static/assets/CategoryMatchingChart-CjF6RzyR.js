import{j as r}from"./jsx-runtime-Bywvkw1S.js";import{r as C}from"./index-CleY8y_P.js";import{c as n}from"./cn-CytzSlOG.js";import{P as k}from"./index-DBU18h-i.js";import{u as w,R as _,B as K,C as M,X as g,Y as u,T as S,a as $,b as E}from"./useMediaQuery-Dj87e1Qj.js";const p=({categories:l,onCategoryClick:o,className:b})=>{const[c,j]=C.useState(null),a=w(),d=[...l].sort((e,s)=>s.score-e.score).slice(0,Math.max(3,l.length)),f=e=>e>.7?"#10b981":e<.3?"#ef4444":"#eab308",y=e=>e>.7?"text-green-700":e<.3?"text-red-700":"text-yellow-700",m=e=>`${(e*100).toFixed(0)}%`,x=d.map(e=>({name:e.category_name,score:e.score*100,rawScore:e.score,color:f(e.score)})),h=e=>{j(c===e.category_name?null:e.category_name),o==null||o(e)},v=e=>!e||Object.keys(e).length===0?"Katkı bilgisi yok":Object.entries(e).map(([s,t])=>`${s}: ${(t*100).toFixed(0)}%`).join(", ");return r.jsx(k,{children:r.jsxs("div",{className:n("rounded-lg border border-gray-200 bg-white p-4 shadow-sm",b),role:"region","aria-label":"Kategori eşleştirme bilgisi",children:[r.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Kategori Eşleştirme"}),d.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-4",role:"img","aria-label":"Kategori skorları bar grafiği",children:r.jsx(_,{width:"100%",height:a?250:300,children:r.jsxs(K,{data:x,layout:a?"horizontal":"vertical",margin:a?{top:5,right:30,left:20,bottom:60}:{top:5,right:30,left:100,bottom:5},children:[r.jsx(M,{strokeDasharray:"3 3"}),a?r.jsxs(r.Fragment,{children:[r.jsx(g,{type:"category",dataKey:"name",angle:-45,textAnchor:"end",height:80}),r.jsx(u,{type:"number",domain:[0,100],label:{value:"Skor (%)",angle:-90,position:"insideLeft"}})]}):r.jsxs(r.Fragment,{children:[r.jsx(g,{type:"number",domain:[0,100],label:{value:"Skor (%)",position:"insideBottom",offset:-5}}),r.jsx(u,{type:"category",dataKey:"name"})]}),r.jsx(S,{content:({active:e,payload:s})=>{if(e&&s&&s.length){const t=s[0].payload;return r.jsxs("div",{className:"rounded-md bg-gray-900 px-3 py-2 text-sm text-white shadow-lg",children:[r.jsx("p",{className:"font-semibold",children:t.name}),r.jsxs("p",{children:["Skor: ",t.score.toFixed(1),"%"]})]})}return null}}),r.jsx($,{dataKey:"score",radius:a?[4,4,0,0]:[0,4,4,0],children:x.map((e,s)=>r.jsx(E,{fill:e.color},`cell-${s}`))})]})})}),r.jsx("div",{className:"space-y-3",role:"list",children:d.map((e,s)=>{const t=c===e.category_name;return r.jsxs("div",{className:n("rounded-md border p-3 transition-all cursor-pointer hover:shadow-md",e.score>.7?"border-green-300 bg-green-50":e.score<.3?"border-red-300 bg-red-50":"border-yellow-300 bg-yellow-50"),role:"listitem",onClick:()=>h(e),onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),h(e))},tabIndex:0,"aria-expanded":t,"aria-label":`${e.category_name}: ${m(e.score)} skor`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:n("flex h-10 w-10 items-center justify-center rounded-full font-bold text-white",e.score>.7?"bg-green-500":e.score<.3?"bg-red-500":"bg-yellow-500"),"aria-hidden":"true",children:m(e.score)}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:n("font-medium",y(e.score)),children:e.category_name}),r.jsxs("span",{className:"text-xs text-gray-500",children:[e.reasons.length," neden"]})]})]}),r.jsx("div",{className:n("transition-transform",t&&"rotate-180"),"aria-hidden":"true",children:r.jsx("svg",{className:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t&&r.jsxs("div",{className:"mt-3 space-y-2 border-t pt-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Eşleştirme Nedenleri:"}),r.jsx("ul",{className:"list-disc list-inside space-y-1",children:e.reasons.map((i,N)=>r.jsx("li",{className:"text-sm text-gray-600",children:i},N))})]}),e.feature_contributions&&Object.keys(e.feature_contributions).length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Özellik Katkıları:"}),r.jsx("div",{className:"text-sm text-gray-600",children:v(e.feature_contributions)})]})]})]},`${e.category_name}-${s}`)})})]}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Kategori eşleştirme bilgisi mevcut değil"})]})})};try{p.displayName="CategoryMatchingChart",p.__docgenInfo={description:"Displays category matching scores with visual indicators",displayName:"CategoryMatchingChart",props:{categories:{defaultValue:null,description:"",name:"categories",required:!0,type:{name:"CategoryMatchingReasoning[]"}},onCategoryClick:{defaultValue:null,description:"",name:"onCategoryClick",required:!1,type:{name:"((category: CategoryMatchingReasoning) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{p as C};
